<h1 class='text-center'>=== URL Stats for '<%= @identifier.capitalize %> -- /<%= @path %>' ===</h1>
<hr>

<section class='row'>
  <section class='col-md-6'>
    <h1>Browsers</h1>
    <table class='table table-responsive table-striped table-bordered'>
      <thead>
        <tr>
          <th>Name</th>
          <th>Requests</th>
          <th>Percentage</th>
        </tr>
      </thead>
      <tbody>
        <% @url_stats[:browser_info].each do |browser_info| %>
          <tr>
            <td><%= browser_info[:description] %></td>
            <td><%= browser_info[:count] %></td>
            <td><%= browser_info[:percent] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
  <section class='col-md-6'>
    <h1>Response Times</h1>
    <table class='table table-responsive table-striped table-bordered'>
      <tbody>
        <tr>
          <td>Longest Response Time</td>
          <td><%= @url.requests.maximum(:response_time).round(2).to_s + " ms"%></td>
        </tr>
        <tr>
          <td>Shortest Response Time</td>
          <td><%= @url.requests.minimum(:response_time).round(2).to_s + " ms"%></td>
        </tr>
        <tr>
          <td>Average Response Time</td>
          <td><%= @url.requests.average(:response_time).round(2).to_s + " ms"%></td>
        </tr>
      </tbody>
    </table>
  </section>
</section>

<section class='row'>
  <section class='col-md-6'>
    <h1>Operating Systems</h1>
    <table class='table table-responsive table-striped table-bordered'>
      <thead>
        <tr>
          <th>Name</th>
          <th>Requests</th>
          <th>Percentage</th>
        </tr>
      </thead>
      <tbody>
        <% @url_stats[:os_info].each do |os_info| %>
          <tr>
            <td><%= os_info[:description] %></td>
            <td><%= os_info[:count] %></td>
            <td><%= os_info[:percent] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
  <section class='col-md-6'>
    <h1>Referrals</h1>
    <table class='table table-responsive table-striped table-bordered'>
      <thead>
        <tr>
          <th>Address</th>
          <th>Requests</th>
          <th>Percentage</th>
        </tr>
      </thead>
      <tbody>
        <% @url_stats[:referral_info].each do |referral_info| %>
          <tr>
            <td><%= referral_info[:description] %></td>
            <td><%= referral_info[:count] %></td>
            <td><%= referral_info[:percent] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
</section>

<section class='row'>
  <section class='col-md-6'>
    <h1>Resolutions</h1>
    <table class='table table-responsive table-striped table-bordered'>
      <thead>
        <tr>
          <th>Description</th>
          <th>Requests</th>
          <th>Percentage</th>
        </tr>
      </thead>
      <tbody>
        <% @url_stats[:resolution_info].each do |resolution_info| %>
          <tr>
            <td><%= resolution_info[:description] %></td>
            <td><%= resolution_info[:count] %></td>
            <td><%= resolution_info[:percent] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
  <section class='col-md-6'>
    <h1>HTTP Verbs</h1>
    <ul>
    <% @url.types.pluck(:name).uniq.each do |type| %>
      <li><%= type %></li>
    <% end %>
    </ul>
  </section>
</section>
